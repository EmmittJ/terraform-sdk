using EmmittJ.Terraform.Sdk;

namespace {{Namespace}};

{{#BlockTypes}}
/// <summary>
/// Block type for {{TerraformName}} in {{../ClassName}}.
/// Nesting mode: {{NestingMode}}
/// </summary>
{{#IsDeprecated}}
[Obsolete("This block is deprecated.")]
{{/IsDeprecated}}
public class {{ClassName}} : TerraformBlock
{
    public {{ClassName}}()
    {
        InitializeOutputs();
    }

    private void InitializeOutputs()
    {
{{#Properties}}
{{#IsArgument}}
        SetOutput("{{TerraformName}}");
{{/IsArgument}}
{{/Properties}}
    }

{{#Properties}}
    /// <summary>
    /// {{Description}}
    /// </summary>
{{#IsRequired}}
    [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "{{Name}} is required")]
{{/IsRequired}}
{{#IsDeprecated}}
    [Obsolete("This property is deprecated.")]
{{/IsDeprecated}}
{{#IsArgument}}
{{#UseRequiredKeyword}}
    public required {{{PropertyWrapper}}} {{Name}}
{{/UseRequiredKeyword}}
{{#UseNullable}}
    public {{{PropertyWrapper}}} {{Name}}
{{/UseNullable}}
    {
        get => GetRequiredOutput<{{{PropertyWrapper}}}>("{{TerraformName}}");
        set => SetProperty("{{TerraformName}}", value);
    }
{{/IsArgument}}
{{^IsArgument}}
{{#UseRequiredKeyword}}
    public required {{{PropertyWrapper}}} {{Name}}
{{/UseRequiredKeyword}}
{{#UseNullable}}
    public {{{PropertyWrapper}}}? {{Name}}
{{/UseNullable}}
    {
        set => SetProperty("{{TerraformName}}", value);
    }
{{/IsArgument}}

{{/Properties}}
}

{{/BlockTypes}}
/// <summary>
/// {{Description}}{{#AdditionalDescription}}
/// {{AdditionalDescription}}{{/AdditionalDescription}}
/// </summary>
{{#IsDeprecated}}
[Obsolete("This {{ConstructKind}} is deprecated.")]
{{/IsDeprecated}}
{{#RequiresUnreferencedCode}}
[System.Diagnostics.CodeAnalysis.RequiresUnreferencedCode("This class uses MinLength/MaxLength validation attributes which use reflection.")]
{{/RequiresUnreferencedCode}}
public class {{ClassName}} : {{BaseClassName}}
{
    public {{ClassName}}(string name) : base("{{TerraformType}}", name)
    {
        InitializeOutputs();
    }

    private void InitializeOutputs()
    {
{{#OutputAttributes}}
        SetOutput("{{TerraformName}}");
{{/OutputAttributes}}
{{#Properties}}
{{#IsArgument}}
        SetOutput("{{TerraformName}}");
{{/IsArgument}}
{{/Properties}}
    }

{{#Properties}}
    /// <summary>
    /// {{Description}}
    /// </summary>
{{#IsRequired}}
    [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "{{Name}} is required")]
{{/IsRequired}}
{{#IsDeprecated}}
    [Obsolete("This property is deprecated.")]
{{/IsDeprecated}}
{{#IsArgument}}
{{#UseRequiredKeyword}}
    public required {{{PropertyWrapper}}} {{Name}}
{{/UseRequiredKeyword}}
{{#UseNullable}}
    public {{{PropertyWrapper}}} {{Name}}
{{/UseNullable}}
    {
        get => GetRequiredOutput<{{{PropertyWrapper}}}>("{{TerraformName}}");
        set => SetProperty("{{TerraformName}}", value);
    }
{{/IsArgument}}
{{^IsArgument}}
{{#UseRequiredKeyword}}
    public required {{{PropertyWrapper}}} {{Name}}
{{/UseRequiredKeyword}}
{{#UseNullable}}
    public {{{PropertyWrapper}}}? {{Name}}
{{/UseNullable}}
    {
        set => SetProperty("{{TerraformName}}", value);
    }
{{/IsArgument}}

{{/Properties}}
{{#BlockTypes}}
    /// <summary>
    /// Block for {{TerraformName}}.
    /// Nesting mode: {{NestingMode}}
    /// </summary>
{{#ValidationAttributes}}
    {{{.}}}
{{/ValidationAttributes}}
{{#IsDeprecated}}
    [Obsolete("This block is deprecated.")]
{{/IsDeprecated}}
{{#UseRequiredKeyword}}
    public required {{{BlockPropertyType}}} {{Name}}
{{/UseRequiredKeyword}}
{{#UseNullable}}
    public {{{BlockPropertyType}}}? {{Name}}
{{/UseNullable}}
    {
        set => SetProperty("{{TerraformName}}", value);
    }

{{/BlockTypes}}
{{#OutputAttributes}}
    /// <summary>
    /// {{Description}}
    /// </summary>
    public TerraformExpression {{Name}} => this["{{TerraformName}}"];

{{/OutputAttributes}}
}
